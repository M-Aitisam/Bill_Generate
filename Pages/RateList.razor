@page "/ratelist"

@using System.Collections.Generic
@inject BillService BillService

<div class="rate-list" style="border: 1px solid #ddd; border-radius: 8px; background-color: #f9f9f9; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
    <h3>Rate List</h3>
    <hr />  
    <div class="rate-list-container">
        @foreach (var item in RateItems)
        {
            <div class="rate-item-card" @onclick="() => AddToBill(item)">
                <div class="rate-item-image">
                    @if (!string.IsNullOrEmpty(item.ImageUrl))
                    {
                        <img src="@item.ImageUrl" alt="@item.Name" />
                    }
                </div>
                <div class="rate-item-details">
                    <span class="rate-item-name">@item.Name</span>
                    <span class="rate-item-price">@item.Price.ToString("C")</span>
                </div>
            </div>
        }
    </div>
</div>

@code {
    public List<RateItem> RateItems { get; set; } = new List<RateItem>
    {
        new RateItem { Name = "Haircut", Price = 200, ImageUrl = "/images/shave.png" },
        new RateItem { Name = "Shave", Price = 150, ImageUrl = "/images/shave.png" },
        new RateItem { Name = "Beard Trim", Price = 100, ImageUrl = "/images/shave.png" },
        new RateItem { Name = "Hair Coloring", Price = 500, ImageUrl = "/images/shave.png" },
        new RateItem { Name = "Hair Styling", Price = 250, ImageUrl = "/images/shave.png" },
        new RateItem { Name = "Facial", Price = 400, ImageUrl = "/images/shave.png" },
        new RateItem { Name = "Manicure", Price = 350, ImageUrl = "/images/shave.png" },
        new RateItem { Name = "Pedicure", Price = 400, ImageUrl = "/images/shave.png" },
        new RateItem { Name = "Head Massage", Price = 200, ImageUrl = "/images/shave.png" }
    };

    private void AddToBill(RateItem item)
    {
        BillService.AddItem(item);
    }
    public class RateItem
    {
        public string? Name { get; set; }
        public decimal BasePrice { get; set; } // The original price for 1 quantity
        public decimal Price { get; set; }
        public int Quantity { get; set; } = 1;

        public bool IsEditing { get; set; } = false; // To toggle the edit mode
        public string ImageUrl { get; set; } = string.Empty;
    }
    
}
