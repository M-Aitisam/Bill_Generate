@page "/clientinformation"

@inject BillService BillService

<div style="background-color:lightgreen; padding:2vw; width: 30vw;">
    <h3 style="display: flex; align-items:center; justify-content:center; font-weight:bold; padding-bottom:2vh">Client Information</h3>

    <div>
        <label>First Name:</label>
        <input type="text" style="padding:2px; border-radius:5px; width:17vw; border-style:none; margin: 1px 0px 2px 3vw" @bind="client.FirstName" />
    </div>
    <div>
        <label>Phone Number:</label>
        <input type="text" style="padding:2px; border-radius:5px; width:17vw; border-style:none; margin: 1vh 0px 2px 1.1vw" @bind="client.PhoneNumber" />
    </div>
    <div>
        <label>Barber Name:</label>
        <select style="padding:2px; border-radius:5px; width:17vw; border-style:none; margin: 1vh 0px 2px 2vw" @bind="client.BarberName">
            @foreach (var barber in barbers)
            {
                <option value="@barber">@barber</option>
            }

        </select>
    </div>
    <div style="margin-top: 2vh;">
        <button @onclick="SaveClient" class="btn btn-outline-success" style="padding: 5px 10px; border-radius: 5px; ">Save</button>
    </div>

    @if (savedClient != null)
    {
        <div style="background-color: lightyellow; padding: 2vw; width: 20vw; margin-top: 2vh;">
            <h3 style="display: flex; align-items: center; justify-content: center; font-weight: bold; font-size:1.30rem; padding-bottom: 2vh;">Saved Client Information</h3>
            <div><strong>First Name:</strong> @savedClient.FirstName</div>
            <div><strong>Phone Number:</strong> @savedClient.PhoneNumber</div>
            <div><strong>Barber Name:</strong> @savedClient.BarberName</div>
        <h4>Bill Details</h4>
            <ul>
                @foreach (var item in BillService.SelectedItems)
                {
                    <li>@item.Name - @item.Price</li>
                }
            </ul>
            <p>Total: @BillService.TotalAmount</p>
        </div>
        
    }
</div>

@code {
    private Client client = new Client();
    private Client? savedClient;
    private List<string> barbers = new List<string> { "John", "Jane", "Alex", "Sam"   , "Moiz" , "Shoaib" };

    public class Client
    {
        public string? FirstName { get; set; }
        public string? PhoneNumber { get; set; }
        public string? BarberName { get; set; }
    }
    private void SaveClient()
    {
        savedClient = new Client
            {
                FirstName = client.FirstName,
                PhoneNumber = client.PhoneNumber,
                BarberName = client.BarberName
            };
        // Clear the form after saving
        client = new Client();
    }
}
