@page "/clientinformation"

@inject BillService BillService

<div style="border-right:1px solid black;  width: 100%;height: -2vh;  background-color: green; z-index: 1000;">
    <h3 style="display: flex; align-items:center; justify-content:center; font-weight:bold; -webkit-text-stroke:1px black; color:darkgreen; padding-bottom:2vh;">
        Total Amount
    </h3>
    <hr />

    <div style="display: flex; justify-content: center; align-items: center; margin-top: 2vh;">
        <p style="font-size: 2rem; font-weight: bold; -webkit-text-stroke: 1px black; color: darkgreen; margin: 0;">
            Total: @BillService.TotalAmount.ToString("C")
        </p>
    </div>

    <div style="display: flex; justify-content: center; margin-top: 2vh;">
        <button @onclick="ClearTotalAmount" class="btn btn-outline-danger" style="padding: 10px 20px; font-size: 1.25rem; border-radius: 5px; transition: background-color 0.3s, color 0.3s;"
                onmouseover="this.style.backgroundColor='#f8d7da'; this.style.color='#721c24';"
                onmouseout="this.style.backgroundColor=''; this.style.color='';">
            Clear
        </button>
    </div>
</div>

@code {
    private void ClearTotalAmount()
    {
        BillService.ClearAllItems();
    }

    protected override void OnInitialized()
    {
        BillService.OnChange += async () => await InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        BillService.OnChange -= async () => await InvokeAsync(StateHasChanged);
    }
}
